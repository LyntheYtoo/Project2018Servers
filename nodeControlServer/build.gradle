//gradle plugins for this project
plugins 
{
    id 'java'
    id 'application'
    id 'eclipse'
}

//variables for gradle script
ext 
{
  _buildDir = 'jar'
  _javaVersion = '1.8'
  _mainClassName = 'project2018.node.NodeControlCore'
}

//set variables to proper options
mainClassName = _mainClassName
 
sourceCompatibility = _javaVersion
targetCompatibility = _javaVersion

//repos for libs
repositories 
{
    mavenCentral()
    jcenter()
}

//libs for this project
dependencies 
{
    compile files('Lib/sqlite-jdbc-3.23.1.jar')
    compile project(':dhcp4java')
}

//options for making jarFile
jar 
{
    manifest 
    {
        attributes 'Main-Class': _mainClassName
    }
    from 
    {
        configurations.compile.collect 
        {
            it.isDirectory() ? it : zipTree(it)
        }
    }
}


//etc settings
eclipse 
{
  classpath 
  {
    downloadSources = true
    defaultOutputDir = file("${buildDir}/classes/main")
  }
}

task initSrc << 
{
    project.sourceSets*.allSource.srcDirTrees.flatten().dir.each { dir ->
        dir.mkdirs()
    }
}


tasks.eclipse.dependsOn cleanEclipse
tasks.eclipse.dependsOn initSrc


[compileJava, compileTestJava, javadoc]*.options*.encoding = 'UTF-8'
tasks.withType(JavaCompile) 
{
    options.encoding = 'UTF-8'
}
javadoc 
{
    options.encoding = 'UTF-8'
}